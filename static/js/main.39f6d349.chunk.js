(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{155:function(e,t,n){},179:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(61),i=n.n(r),s=n(67),o=n(7),d=n.n(o),l=n(14),u=n(8),p=(n(74),n(75),n(10)),j=n(37),h=n(62),b=n.n(h),O=n(1),v=function(e){var t=e.activeNote,n=e.onUpdateNote,a=e.isUpdated,c=e.setUpdateStatus,r=function(e,a){var r;n(Object(j.a)(Object(j.a)({},t),{},(r={},Object(p.a)(r,e,a),Object(p.a)(r,"lastModified",Date.now()),Object(p.a)(r,"isImp",!1),Object(p.a)(r,"isPinned",!1),r))),c(!1)};if(!t)return Object(O.jsx)("div",{className:"no-active-note",children:"No Active Note"});var i="."===t.body?"":t.body;return Object(O.jsx)("div",{className:"app-main",children:Object(O.jsxs)("div",{className:"app-main-note-edit",children:[Object(O.jsxs)("div",{className:"app-main-note-header",children:[Object(O.jsx)("input",{type:"text",id:"title",placeholder:"Note Title",value:t.title,onChange:function(e){return r("title",e.target.value)},autoFocus:!0}),a?Object(O.jsx)("div",{children:Object(O.jsxs)("svg",{class:"checkmark",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52",children:[Object(O.jsx)("circle",{class:"checkmark__circle",cx:"26",cy:"26",r:"25",fill:"none"}),Object(O.jsx)("path",{class:"checkmark__check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]})}):Object(O.jsx)("div",{})]}),Object(O.jsx)("textarea",{id:"body",placeholder:"Write your note here...",value:i,onChange:function(e){return r("body",e.target.value)}}),Object(O.jsxs)("div",{className:"app-main-note-preview",children:[Object(O.jsx)("h1",{className:"preview-title",children:t.title}),Object(O.jsx)(b.a,{className:"markdown-preview",children:i})]})]})})},f=function(e){var t=e.notes,n=e.onAddNote,a=e.onDeleteNote,c=e.activeNote,r=e.setActiveNote,i=t.sort((function(e,t){return t.updatedAt-e.updatedAt}));return Object(O.jsxs)("div",{className:"app-sidebar",children:[Object(O.jsxs)("div",{className:"app-sidebar-header",children:[Object(O.jsx)("h1",{children:"Notes"}),Object(O.jsx)("button",{onClick:n,children:"Add"})]}),Object(O.jsx)("div",{className:"app-sidebar-notes",children:i.map((function(e,t){var n=e._id,i=e.title,s=e.body,o=e.updatedAt;return Object(O.jsxs)("div",{className:"app-sidebar-note ".concat(n===c&&"active"),onClick:function(){return r(n)},children:[Object(O.jsxs)("div",{className:"sidebar-note-title",children:[Object(O.jsx)("strong",{children:i&&i.substr(0,17)+"..."}),Object(O.jsx)("button",{onClick:function(e){return a(n)},children:"Delete"})]}),Object(O.jsx)("p",{children:s&&s.substr(0,57)+"..."}),Object(O.jsxs)("small",{className:"note-meta",children:["Last Modified"," ",new Date(o).toLocaleDateString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})}))})]})},m=n(63),x=n(64),g=n(68),w=n(66),N=(n(155),n(15)),k=n.n(N),y="https://jottly-app.herokuapp.com/api/v1/user/login",S=function(e){Object(g.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={email:"",pwd:"",token:null,user:{}},e.createLogin=Object(l.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.post(y,{payload:{email:e.state.email,password:e.state.pwd}}).then((function(t){e.setState({token:t.data.token,user:t.data.user}),localStorage.setItem("token",e.state.token),console.log(t.data.token,t.data.user)}));case 2:case"end":return t.stop()}}),t)}))),e.handleChange=function(t){var n=t.target,a=n.name,c=n.value;e.setState(Object(p.a)({},a,c))},e.handleSubmit=function(){var t=Object(l.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.createLogin();case 3:null!=e.state.token&&e.props.isLogin(!0,e.state.token);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(x.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"div-login",children:Object(O.jsx)("div",{children:Object(O.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(O.jsx)("input",{type:"email",name:"email",placeholder:"email...",required:!0,onChange:this.handleChange}),Object(O.jsx)("input",{type:"password",name:"pwd",placeholder:"password...",required:!0,onChange:this.handleChange}),Object(O.jsx)("button",{onSubmit:this.handleSubmit,children:"Log In"})]})})})}}]),n}(c.a.Component),A=n(2),_=n(65);var C=function(){var e=Object(a.useState)(localStorage.notes?JSON.parse(localStorage.notes):[]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(localStorage.token?localStorage.token:null),i=Object(u.a)(r,2),o=i[0],p=i[1],j=Object(a.useState)(!!o),h=Object(u.a)(j,2),b=h[0],m=h[1],x=Object(a.useState)(!1),g=Object(u.a)(x,2),w=g[0],N=g[1],y="https://jottly-app.herokuapp.com/api/v1/note",C=Object(a.useState)(!1),D=Object(u.a)(C,2),I=D[0],L=D[1];Object(a.useEffect)(Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{authorization:o}},e.next=3,k.a.post(y+"/list",{},t).then((function(e){c(e.data.data)}));case 3:case"end":return e.stop()}}),e)}))),[]);var U=function(){var e=Object(l.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{authorization:o}},a={title:"Untitled Note",body:"",isPinned:!1,isImp:!1,_id:(new _.a).toString(),updatedAt:Date.now()},c([a].concat(Object(s.a)(n))),N(a._id),e.next=6,k.a.post(y+"/add",{payload:a},t).then((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(n.filter((function(e){return e._id!==t}))),a={headers:{authorization:o}},r={ids:[t]},e.next=5,k.a.post(y+"/delete",{payload:r},a).then((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(d.a.mark((function e(t){var a,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.map((function(e){return e._id===t._id?t:e})),c(a),r={headers:{authorization:o}},i={title:t.title,body:t.body,isPinned:t.isPinned,isImp:t.isImp,_id:t._id,updatedAt:Date.now()},e.next=6,k.a.post(y+"/update",{payload:i},r).then((function(e){200===e.data.status?L(!0):L(!1)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(A.c,{children:Object(O.jsx)(A.a,{path:"/",element:b?Object(O.jsxs)("div",{className:"App-Home",children:[Object(O.jsx)(f,{notes:n,onAddNote:U,onDeleteNote:z,activeNote:w,setActiveNote:N}),Object(O.jsx)(v,{activeNote:n.find((function(e){return e._id===w})),onUpdateNote:M,isUpdated:I,setUpdateStatus:L})]}):Object(O.jsx)(S,{isLogin:function(e,t){m(e),p(t)}})})})})},D=n(36);i.a.render(Object(O.jsx)(D.a,{children:Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(C,{})})}),document.getElementById("root"))},75:function(e,t,n){}},[[179,1,2]]]);
//# sourceMappingURL=main.39f6d349.chunk.js.map